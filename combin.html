<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combinador de Dados Inteligente - Geração Poderosa de Listas</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        /* Paleta de Cores - Deep Tech & Royal Purple */
        :root {
            --bg-primary: #0A0A0A;         /* Preto Profundo (Fundo principal) */
            --bg-secondary: #1A1A1A;       /* Cinza Escuro Suave (Fundo de elementos/cards) */
            --purple-btn: #8A2BE2;         /* Púrpura Vibrante (Botões primários) */
            --purple-btn-hover: #9E5BEE;   /* Púrpura mais claro ao hover */
            --text-light: #E0E0E0;         /* Cinza Claro (Texto principal) */
            --text-muted: #A0A0A0;         /* Cinza Médio (Texto secundário/detalhes) */
            --border-dark: #333333;        /* Cinza Escuro para bordas */
            --accent-glow: rgba(138, 43, 226, 0.4); /* Brilho do púrpura */
            --success-green: #39FF14;      /* Verde Neon para sucesso */
            --error-red: #FF0000;          /* Vermelho vibrante para erro/remover */
        }

        body {
            font-family: 'Montserrat', sans-serif; /* Fonte para títulos e botões */
            line-height: 1.6;
            margin: 0;
            background-color: var(--bg-primary);
            color: var(--text-light);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 40px 0; /* Mais padding vertical para respiro */
        }
        .container {
            max-width: 950px; /* Um pouco mais largo para imponência */
            width: 100%;
            background: var(--bg-secondary);
            padding: 40px 50px; /* Mais padding interno */
            border-radius: 15px; /* Bordas mais suaves */
            box-shadow: 0 15px 40px rgba(0,0,0,0.5); /* Sombra mais intensa */
            border: 1px solid var(--border-dark); /* Borda sutil para dar acabamento */
        }
        h1 {
            color: var(--purple-btn);
            text-align: center;
            margin-bottom: 15px;
            font-size: 2.8em; /* Título maior */
            font-weight: 700;
            text-shadow: 0 0 10px var(--accent-glow); /* Brilho sutil no título */
        }
        h2 {
            color: var(--text-light);
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid var(--purple-btn); /* Linha púrpura sob títulos */
            padding-bottom: 8px;
            font-weight: 700;
        }
        p {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2em;
            color: var(--text-light);
            line-height: 1.5;
        }

        /* Seções de entrada e configuração */
        .list-group, .config-group {
            margin-bottom: 30px;
            border: 1px solid var(--border-dark);
            padding: 25px;
            border-radius: 10px;
            background-color: var(--bg-primary); /* Fundo mais escuro para cards */
            box-shadow: inset 0 0 15px rgba(0,0,0,0.3); /* Sombra interna para profundidade */
        }
        .list-group label, .config-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--text-light);
        }
        .list-group input[type="text"], .config-group input[type="text"],
        .list-group textarea {
            width: calc(100% - 24px); /* Ajuste para padding e borda */
            padding: 12px;
            border: 1px solid var(--border-dark);
            border-radius: 8px;
            font-size: 1.05em;
            background-color: var(--bg-secondary); /* Fundo dos inputs */
            color: var(--text-light);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .list-group input[type="text"]:focus, .config-group input[type="text"]:focus,
        .list-group textarea:focus {
            border-color: var(--purple-btn);
            outline: none;
            box-shadow: 0 0 0 4px var(--accent-glow); /* Brilho ao focar */
        }
        .list-group textarea {
            min-height: 120px; /* Maior altura padrão */
            resize: vertical;
            font-family: 'Roboto Mono', monospace; /* Fonte monoespaçada */
        }
        .list-actions {
            text-align: right;
            margin-top: 10px;
        }
        .list-actions button {
            background-color: var(--error-red);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .list-actions button:hover {
            background-color: #CC0000;
            transform: translateY(-1px);
        }

        /* Botões de Ação Global */
        .add-list-btn, .generate-btn, .result-actions button, #premium-section button {
            border: none;
            border-radius: 10px; /* Bordas mais arredondadas */
            cursor: pointer;
            font-weight: 700;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            text-transform: uppercase; /* Texto em maiúsculas para impacto */
            letter-spacing: 1px;
        }

        .add-list-btn {
            background-color: var(--purple-btn);
            color: white;
            padding: 15px 25px;
            font-size: 1.1em;
            margin-top: 20px;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3);
        }
        .add-list-btn:hover {
            background-color: var(--purple-btn-hover);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.4);
        }
        .add-list-btn:disabled {
            background-color: var(--border-dark);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .generate-btn {
            background-color: var(--purple-btn); /* Púrpura para o botão principal */
            color: white;
            padding: 22px 40px; /* Maior padding */
            font-size: 1.8em; /* Texto maior */
            width: 100%;
            margin-top: 40px;
            box-shadow: 0 8px 25px rgba(138, 43, 226, 0.5); /* Sombra intensa */
        }
        .generate-btn:hover {
            background-color: var(--purple-btn-hover);
            transform: translateY(-5px); /* Mais destaque no hover */
            box-shadow: 0 12px 35px rgba(138, 43, 226, 0.6);
        }

        /* Configurações de Geração */
        .config-group div {
            margin-bottom: 12px;
        }
        .config-group input[type="radio"] {
            margin-right: 8px;
            accent-color: var(--purple-btn); /* Cor para radio buttons */
            transform: scale(1.2); /* Rádios maiores */
            vertical-align: middle;
        }
        .config-group label {
            display: inline-block; /* Alinha labels com rádios */
            margin-right: 25px;
        }
        #customSeparator {
            width: 100px; /* Maior largura */
            background-color: var(--bg-primary); /* Fundo do input custom */
            color: var(--text-light);
        }

        /* Área de Resultados */
        #results {
            width: calc(100% - 24px);
            min-height: 300px; /* Maior altura padrão */
            padding: 12px;
            border: 1px solid var(--border-dark);
            border-radius: 8px;
            resize: vertical;
            margin-top: 20px;
            font-family: 'Roboto Mono', monospace; /* Fonte monoespaçada para código/listas */
            font-size: 1em;
            background-color: var(--bg-primary); /* Fundo escuro para a área de resultados */
            color: var(--success-green); /* Texto verde neon para saída */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
        }
        .result-info {
            margin-top: 20px;
            font-weight: 700;
            color: var(--purple-btn);
            font-size: 1.2em;
            text-align: right; /* Alinha info de resultados à direita */
        }
        .result-actions {
            margin-top: 20px;
            display: flex;
            gap: 20px;
            justify-content: flex-end;
        }
        .result-actions button {
            background-color: var(--purple-btn); /* Púrpura para os botões de ação */
            color: white;
            padding: 12px 25px;
            font-size: 1em;
            box-shadow: 0 2px 10px rgba(138, 43, 226, 0.3);
        }
        .result-actions button:hover {
            background-color: var(--purple-btn-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.4);
        }
        #downloadCsvBtn {
            background-color: var(--border-dark); /* Cinza para premium/desabilitado */
        }
        #downloadCsvBtn:hover {
            background-color: #444444;
        }

        /* Seção Premium */
        #premium-section {
            margin-top: 50px;
            border-top: 2px solid var(--border-dark);
            padding-top: 40px;
            text-align: center;
            background-color: var(--bg-primary);
            border-radius: 10px;
            padding-bottom: 30px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.4);
        }
        #premium-section h3 {
            color: var(--purple-btn);
            font-size: 2.2em;
            margin-bottom: 15px;
            text-shadow: 0 0 8px var(--accent-glow);
        }
        #premium-section p {
            color: var(--text-light);
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        #premium-section button {
            background-color: var(--purple-btn); /* Púrpura para o CTA Premium */
            color: white;
            padding: 18px 35px;
            font-size: 1.4em;
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.4);
        }
        #premium-section button:hover {
            background-color: var(--purple-btn-hover);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(138, 43, 226, 0.5);
        }

        /* Espaço para Anúncios */
        .ad-space {
            background-color: var(--bg-primary); /* Fundo de anúncio */
            text-align: center;
            padding: 20px 0;
            margin: 30px 0;
            border: 1px dashed var(--border-dark);
            color: var(--text-muted);
            font-size: 1em;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }
        .ad-space p {
            margin: 0;
            padding: 0;
            font-size: 1em; /* Ajusta o tamanho da fonte da frase "Anúncios..." */
            color: var(--text-muted); /* Cor para a frase de ad */
            text-align: center;
        }


        /* Rodapé */
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.95em;
            color: var(--text-muted);
            padding-top: 20px;
            border-top: 1px solid var(--border-dark);
        }
        footer a {
            color: var(--purple-btn);
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        footer a:hover {
            color: var(--purple-btn-hover);
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Combinador de Dados Inteligente</h1>
        <p>Aumente sua produtividade gerando combinações e permutações de dados com poder e precisão.</p>

        <div class="ad-space">
            [Espaço para Anúncios - Google AdSense]
            <p>Anúncios ajudam a manter a versão gratuita desta ferramenta poderosa!</p>
        </div>

        <h2>1. Insira Suas Variáveis</h2>
        <div id="listInputs">
            </div>
        <div style="text-align: center;">
            <button id="addListBtn" class="add-list-btn">+ Adicionar Nova Lista</button>
            <p style="margin-top: 15px; font-size: 1em; color: var(--text-muted);">
                <a href="#premium-section" style="color: var(--purple-btn); text-decoration: underline;">Desbloqueie mais variáveis no Premium!</a>
            </p>
        </div>

        <h2>2. Configure a Geração</h2>
        <div class="config-group">
            <div>
                <label>Tipo de Geração:</label>
                <label><input type="radio" name="generationType" value="combinations" checked> Combinações (Ordem não importa)</label>
                <label><input type="radio" name="generationType" value="permutations"> Permutações (Ordem importa)</label>
            </div>
            <div style="margin-top: 15px;">
                <label>Separador de Itens:</label>
                <label><input type="radio" name="separatorType" value="space" checked> Espaço</label>
                <label><input type="radio" name="separatorType" value="comma"> Vírgula (,)</label>
                <label><input type="radio" name="separatorType" value="hyphen"> Hífen (-)</label>
                <label><input type="radio" name="separatorType" value="custom"> Outro:</label>
                <input type="text" id="customSeparator" placeholder="Ex: e">
            </div>
            <div style="margin-top: 15px;">
                <label>Prefixo (opcional):</label>
                <input type="text" id="prefix" placeholder="Ex: 'ID-'" maxlength="20">
            </div>
            <div style="margin-top: 10px;">
                <label>Sufixo (opcional):</label>
                <input type="text" id="suffix" placeholder="Ex: '-V2'" maxlength="20">
            </div>
        </div>

        <button id="generateBtn" class="generate-btn">GERAR COMBINAÇÕES AGORA</button>

        <h2>3. Seu Resultado Poderoso</h2>
        <div class="result-info">Total de Combinações Geradas: <span id="totalCombinations">0</span></div>
        <textarea id="results" readonly></textarea>
        <div class="result-actions">
            <button id="copyResultsBtn">Copiar Resultados</button>
            <button id="downloadCsvBtn">Baixar CSV (Premium)</button>
        </div>

        <div class="ad-space">
            [Espaço para Anúncios - Google AdSense]
            <p>Se você valoriza esta ferramenta, considere o Premium!</p>
        </div>

        <div id="premium-section">
            <h3>Domine seus Dados com o Plano Premium!</h3>
            <p>Remova limites de listas e itens, gere milhões de combinações, baixe em CSV e desfrute de uma experiência sem anúncios.</p>
            <button>Assine o Plano Premium!</button>
        </div>

        <footer>
            <p>&copy; 2025 SeuSite.com - Todos os direitos reservados.</p>
            <a href="#">Sobre</a> | <a href="#">Contato</a> | <a href="#">Política de Privacidade</a> | <a href="#">Termos de Uso</a>
        </footer>
    </div>

    <script>
        const listInputsDiv = document.getElementById('listInputs');
        const addListBtn = document.getElementById('addListBtn');
        const generateBtn = document.getElementById('generateBtn');
        const resultsTextarea = document.getElementById('results');
        const totalCombinationsSpan = document.getElementById('totalCombinations');
        const copyResultsBtn = document.getElementById('copyResultsBtn');
        const downloadCsvBtn = document.getElementById('downloadCsvBtn');
        const customSeparatorInput = document.getElementById('customSeparator');

        let listCounter = 0;
        const FREE_LIST_LIMIT = 3; // Limite de listas gratuitas
        const FREE_ITEM_LIMIT_PER_LIST = 20; // Limite de itens por lista gratuita
        const FREE_COMBINATION_LIMIT = 5000; // Limite total de combinações gratuitas

        // Atualiza o estado do input de separador customizado
        document.querySelectorAll('input[name="separatorType"]').forEach(radio => {
            radio.addEventListener('change', () => {
                customSeparatorInput.disabled = radio.value !== 'custom';
            });
        });
        customSeparatorInput.disabled = true; // Inicia desabilitado

        function addListInput() {
            if (listCounter >= FREE_LIST_LIMIT) {
                alert(`Você atingiu o limite de ${FREE_LIST_LIMIT} listas para o plano gratuito. Torne-se Premium para adicionar mais!`);
                return;
            }

            listCounter++;
            const listGroup = document.createElement('div');
            listGroup.className = 'list-group';
            listGroup.dataset.listId = listCounter;

            listGroup.innerHTML = `
                <label>Lista ${listCounter}:</label>
                <input type="text" class="list-title" placeholder="Nome da Lista (opcional)">
                <textarea class="list-items" placeholder="Digite seus itens, um por linha (máximo ${FREE_ITEM_LIMIT_PER_LIST} para o plano gratuito)." oninput="checkItemLimit(this)"></textarea>
                <div class="list-actions">
                    <button onclick="removeListInput(${listCounter})">Remover Lista</button>
                </div>
            `;
            listInputsDiv.appendChild(listGroup);

            // Desabilitar o botão se atingir o limite
            if (listCounter >= FREE_LIST_LIMIT) {
                addListBtn.disabled = true;
            }
        }

        function removeListInput(id) {
            const listGroup = document.querySelector(`.list-group[data-list-id="${id}"]`);
            if (listGroup) {
                listInputsDiv.removeChild(listGroup);
                listCounter--;
                addListBtn.disabled = false; // Habilita o botão se remover uma lista
            }
        }

        function checkItemLimit(textarea) {
            const items = textarea.value.split('\n').filter(item => item.trim() !== '');
            if (items.length > FREE_ITEM_LIMIT_PER_LIST) {
                textarea.style.borderColor = var(--error-red); // Destaque visual
            } else {
                textarea.style.borderColor = var(--border-dark); // Volta ao normal
            }
        }
        
        // Função para o produto cartesiano (combinações de múltiplas listas)
        function cartesianProduct(arrays) {
            if (arrays.length === 0) return [];
            // Remove empty arrays from the input to avoid unwanted empty results
            const validArrays = arrays.filter(arr => arr.length > 0);
            if (validArrays.length === 0) return [];
            
            return validArrays.reduce((a, b) => a.flatMap(d => b.map(e => [d, e].flat())));
        }

        // Função para gerar permutações de itens *dentro de uma única lista*
        function generatePermutationsSingleList(arr) {
            const result = [];
            function permute(current, remaining) {
                if (remaining.length === 0) {
                    result.push(current.join(''));
                    return;
                }
                for (let i = 0; i < remaining.length; i++) {
                    const next = current.concat(remaining[i]);
                    const nextRemaining = remaining.slice(0, i).concat(remaining.slice(i + 1));
                    permute(next, nextRemaining);
                }
            }
            permute([], arr);
            return result;
        }

        function generateCombinationsOrPermutations() {
            const allLists = [];
            let freeLimitAlerts = {
                listCount: false,
                itemCount: false,
                combinationCount: false
            };

            document.querySelectorAll('.list-group textarea').forEach(textarea => {
                let items = textarea.value.split('\n').map(item => item.trim()).filter(item => item !== '');
                
                if (items.length > FREE_ITEM_LIMIT_PER_LIST) {
                    freeLimitAlerts.itemCount = true;
                    items = items.slice(0, FREE_ITEM_LIMIT_PER_LIST); // Corta para o limite gratuito
                }
                
                if (items.length > 0) {
                    allLists.push(items);
                }
            });

            if (allLists.length === 0) {
                alert('Por favor, adicione pelo menos uma lista de itens para gerar combinações.');
                return;
            }
            
            // Check list count limit
            if (allLists.length > FREE_LIST_LIMIT) {
                 freeLimitAlerts.listCount = true;
                 allLists.splice(FREE_LIST_LIMIT); // Cortar as listas para o limite gratuito
            }

            const generationType = document.querySelector('input[name="generationType"]:checked').value;
            let separator = document.querySelector('input[name="separatorType"]:checked').value;
            if (separator === 'custom') {
                separator = customSeparatorInput.value;
            } else if (separator === 'space') {
                separator = ' ';
            } else if (separator === 'comma') {
                separator = ',';
            } else if (separator === 'hyphen') {
                separator = '-';
            }

            const prefix = document.getElementById('prefix').value;
            const suffix = document.getElementById('suffix').value;

            let generated = [];

            if (generationType === 'combinations') {
                generated = cartesianProduct(allLists).map(combo => {
                    const items = Array.isArray(combo) ? combo : [combo]; // Garante que é array
                    return prefix + items.join(separator) + suffix;
                });
            } else { // permutations
                if (allLists.length === 1) {
                    generated = generatePermutationsSingleList(allLists[0]).map(p => prefix + p + suffix);
                } else {
                    // For multiple lists, 'permutations' is interpreted as combinations (Cartesian product)
                    // unless specified otherwise for complex internal permutations.
                    alert("Para múltiplas listas, o tipo 'Permutações' gerará o Produto Cartesiano (Combinações) com a ordem de entrada das listas. Para permutações de itens *dentro de uma única lista*, por favor, insira apenas uma lista.");
                    generated = cartesianProduct(allLists).map(combo => {
                        const items = Array.isArray(combo) ? combo : [combo];
                        return prefix + items.join(separator) + suffix;
                    });
                }
            }
            
            // Lógica de limite final de combinações
            if (generated.length > FREE_COMBINATION_LIMIT) {
                freeLimitAlerts.combinationCount = true;
                resultsTextarea.value = generated.slice(0, FREE_COMBINATION_LIMIT).join('\n');
                totalCombinationsSpan.textContent = `${FREE_COMBINATION_LIMIT} (Limite Gratuito)`;
            } else {
                resultsTextarea.value = generated.join('\n');
                totalCombinationsSpan.textContent = generated.length;
            }

            // Exibir alertas de limite após a geração
            let alertMessage = "";
            if (freeLimitAlerts.listCount) {
                alertMessage += `Você usou mais de ${FREE_LIST_LIMIT} listas. Apenas as primeiras ${FREE_LIST_LIMIT} foram processadas. Torne-se Premium para usar mais!\n`;
            }
            if (freeLimitAlerts.itemCount) {
                alertMessage += `Você tem mais de ${FREE_ITEM_LIMIT_PER_LIST} itens em alguma lista. Apenas os primeiros ${FREE_ITEM_LIMIT_PER_LIST} itens por lista foram usados. Torne-se Premium para usar todos os seus itens!\n`;
            }
            if (freeLimitAlerts.combinationCount) {
                alertMessage += `Você excedeu o limite de ${FREE_COMBINATION_LIMIT} combinações. Apenas as primeiras ${FREE_COMBINATION_LIMIT} foram exibidas. Torne-se Premium para gerar todas!\n`;
            }
            if (alertMessage) {
                alert("Atenção: Limites da versão gratuita foram atingidos.\n\n" + alertMessage);
            }
        }

        // Event Listeners
        addListBtn.addEventListener('click', addListInput);
        generateBtn.addEventListener('click', generateCombinationsOrPermutations);
        copyResultsBtn.addEventListener('click', () => {
            resultsTextarea.select();
            document.execCommand('copy');
            alert('Resultados copiados para a área de transferência!');
        });
        downloadCsvBtn.addEventListener('click', () => {
            alert('Este é um recurso Premium! Torne-se Premium para baixar seus resultados.');
            // Implementar lógica de download para usuários premium
        });

        // Initial list input
        addListInput();
    </script>
</body>
</html>